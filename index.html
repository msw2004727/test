<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€ªç¸é¤Šæˆå°æˆ° Demo - å‰å¾Œç«¯æ•´åˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <style>
        /* æ€ªç¸å¿«ç…§å€åŸŸç‰¹å®šæ¨£å¼ */
        .monster-snapshot-area {
            position: relative; 
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            padding: 8px; 
            min-height: 230px; 
        }
         @media (min-width: 768px) {
            .monster-snapshot-area {
                min-height: 270px; 
            }
        }

        /* åœ–å±¤æ¨£å¼ */
        #monster-snapshot-base-bg,
        #monster-snapshot-body-silhouette,
        #monster-parts-container {
            position: absolute;
            top: 50%; 
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: contain; 
        }

        #monster-snapshot-base-bg { 
            z-index: 1; 
            width: 100%; 
            height: 100%;
            object-fit: cover; 
        }

        #monster-snapshot-body-silhouette { 
            z-index: 2; 
            max-width: 75%; 
            max-height: 75%;
        }

        #monster-parts-container { 
            z-index: 3; 
            width: 70%; 
            height: 85%; 
            display: grid; 
            grid-template-columns: 28% 44% 28%; /* å·¦(28%) ä¸­(44%) å³(28%) */
            grid-template-rows: 30% 35% 35%;    /* é ­(30%) æ‰‹(35%) è…³(35%) */
            grid-template-areas:
                ".    head   ."
                "lArm body rArm"
                "lLeg body rLeg"; /* è®“ body å€åŸŸä¹Ÿå»¶ä¼¸åˆ°è…¿éƒ¨ï¼Œä»¥æ›´å¥½åœ°è¦†è“‹å…¨èº«åœ– */
            gap: 1%; 
        }
        
        .monster-part {
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            width: 100%; 
            height: 100%; 
            border: 1px dashed var(--accent-color-dark); /* é è¨­è™›ç·šæ¡†ï¼Œé¡è‰²å¯èª¿ */
            box-sizing: border-box; /* ç¢ºä¿é‚Šæ¡†ä¸æœƒä½¿å…ƒç´ è®Šå¤§ */
        }

        .monster-part.empty-part { /* ç•¶æ²’æœ‰åœ–ç‰‡æ™‚ï¼ŒèƒŒæ™¯é€æ˜ï¼Œä½†ä¿ç•™è™›ç·šæ¡† */
            background-image: none !important;
            background-color: transparent !important;
        }

        #monster-part-head { grid-area: head; }
        #monster-part-left-arm { grid-area: lArm; }
        #monster-part-right-arm { grid-area: rArm; }
        #monster-part-left-leg { grid-area: lLeg; }
        #monster-part-right-leg { grid-area: rLeg; }

        /* æ–‡å­—è³‡è¨Šç–ŠåŠ å±¤ */
        .snapshot-info-overlay {
            position: absolute;
            bottom: 8px; 
            left: 10px;
            right: 10px;
            z-index: 4;
            display: flex;
            justify-content: space-between;
            align-items: flex-end; 
            pointer-events: none; 
        }

        .snapshot-info-left {
            text-align: left;
        }
        .snapshot-info-right {
            text-align: right;
        }
        
        #snapshot-achievement-title { 
            font-size: 1.1rem; 
            font-weight: bold;
            color: var(--accent-color); 
            display: block; 
        }
        #snapshot-nickname { 
            font-size: 0.8rem; 
            color: var(--text-secondary); 
            display: block; 
            margin-top: 1px; 
        }
        #snapshot-evaluation {
            font-size: 1.1rem; 
            font-weight: bold;
            color: var(--success-color);
        }

        #snapshot-win-loss {
            position: absolute;
            top: 8px;
            right: 10px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            z-index: 4;
            background-color: color-mix(in srgb, var(--bg-panel) 70%, transparent);
            padding: 3px 6px;
            border-radius: 4px;
        }
         #snapshot-win-loss span { display: block; }

        #snapshot-main-content { 
            position: absolute;
            top: 8px; 
            left: 50%;
            transform: translateX(-50%);
            z-index: 4;
        }
    </style>
</head>
<body>
    <!-- èº«ä»½é©—è­‰ç•«é¢ -->
    <div id="auth-screen">
        <div class="auth-container">
            <h1 class="auth-title">æ€ªç¸ç•°ä¸–ç•Œ</h1>
            <button id="show-login-form-btn" class="auth-button primary">ä½¿ç”¨æš±ç¨±/å¯†ç¢¼ç™»å…¥</button>
            <button id="show-register-form-btn" class="auth-button secondary highlighted-register">é‡æ–°é–‹å§‹éŠæˆ² (å‰µå»ºå¸³è™Ÿ)</button>
        </div>
    </div>

    <!-- è¨»å†Šå½ˆçª— -->
    <div id="register-modal" class="modal">
        <div class="modal-content" style="max-width: 420px;">
            <span class="modal-close" data-modal-id="register-modal">&times;</span> 
            <h3 class="modal-header">å‰µå»ºæ‚¨çš„è¨“ç¸å¸«å¸³è™Ÿ</h3>
            <div class="modal-body">
                <input type="text" id="register-nickname" class="auth-input" placeholder="è«‹è¼¸å…¥æ‚¨çš„æš±ç¨±" required>
                <input type="password" id="register-password" class="auth-input" placeholder="è«‹è¨­å®šæ‚¨çš„å¯†ç¢¼" required>
                <div id="register-error" class="auth-error-message"></div>
                <button id="register-submit-btn" class="auth-button success">å‰µå»ºä¸¦é€²å…¥ç•°ä¸–ç•Œ</button>
            </div>
        </div>
    </div>

    <!-- ç™»å…¥å½ˆçª— -->
    <div id="login-modal" class="modal">
        <div class="modal-content" style="max-width: 420px;">
            <span class="modal-close" data-modal-id="login-modal">&times;</span> 
            <h3 class="modal-header">è¨“ç¸å¸«ç™»å…¥</h3>
            <div class="modal-body">
                <input type="text" id="login-nickname" class="auth-input" placeholder="æ‚¨çš„æš±ç¨±" required>
                <input type="password" id="login-password" class="auth-input" placeholder="æ‚¨çš„å¯†ç¢¼" required>
                <div id="login-error" class="auth-error-message"></div>
                <button id="login-submit-btn" class="auth-button primary">ç™»å…¥ç•°ä¸–ç•Œ</button>
            </div>
        </div>
    </div>

    <!-- éŠæˆ²å®˜æ–¹å…¬å‘Šå½ˆçª— -->
    <div id="official-announcement-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="modal-close" data-modal-id="official-announcement-modal" id="official-announcement-close-x">&times;</span>
            <h3 class="modal-header">ğŸ“¢ éŠæˆ²å®˜æ–¹å…¬å‘Š</h3>
            <div class="modal-body">
                <div id="announcement-ad-banner" style="background-color: var(--bg-slot); border: 1px solid var(--border-color); color: var(--text-primary); text-align: center; padding: 20px; border-radius: 6px; margin-bottom: 15px;">
                    -- é€™è£¡æ˜¯å»£å‘Šæ¬„ä½ (å¯æ”¾ç½®åœ–ç‰‡æˆ–æ–‡å­—) --
                </div>
                <div id="announcement-content">
                    <p>è¦ªæ„›çš„<span id="announcement-player-name" class="font-bold text-[var(--accent-color)]">ç©å®¶</span>æ‚¨å¥½ï¼Œ</p>
                    <p>æ„Ÿè¬æ‚¨åƒèˆ‡æ€ªç¸ç•°ä¸–ç•Œçš„å†’éšªï¼éŠæˆ²ç›®å‰ä»åœ¨é–‹ç™¼èˆ‡æ¸¬è©¦éšæ®µï¼Œæˆ‘å€‘å°‡æŒçºŒåŠªåŠ›å¸¶ä¾†æ›´å¤šç²¾å½©å…§å®¹èˆ‡å„ªåŒ–ï¼</p>
                    <p>è‹¥æœ‰ä»»ä½•å»ºè­°æˆ–é‡åˆ°å•é¡Œï¼Œæ­¡è¿éš¨æ™‚é€ééŠæˆ²å…§å›é¥‹ç³»çµ±èˆ‡æˆ‘å€‘è¯ç¹«ã€‚</p>
                    <p style="text-align: right; margin-top: 20px;">æ€ªç¸ç•°ä¸–ç•Œç‡Ÿé‹åœ˜éšŠ æ•¬ä¸Š</p>
                </div>
            </div>
        </div>
    </div>

    <!-- éŠæˆ²ä¸»å®¹å™¨ -->
    <div id="game-container" style="display: none; width:100%; display:flex; flex-direction:column; align-items:center;">
        <div class="main-container">
            <button id="main-logout-btn" class="corner-button top-left-button" title="ç™»å‡º">ğŸšª</button>
            <button id="theme-switcher" class="corner-button top-right-button" title="åˆ‡æ›ä¸»é¡Œ">
                <span id="theme-icon">ğŸŒ™</span>
            </button>

            <!-- æ€ªç¸å¿«ç…§é¢æ¿ -->
            <div class="monster-snapshot-panel panel">
                <div id="monster-snapshot-area" class="monster-snapshot-area">
                    <!-- åœ–å±¤1: èƒŒæ™¯åœ– -->
                    <img id="monster-snapshot-base-bg" src="https://github.com/msw2004727/MD/blob/main/images/a001.png?raw=true" alt="æ€ªç¸å¿«ç…§èƒŒæ™¯">
                    
                    <!-- åœ–å±¤2: æ€ªç¸å…¨èº«åœ– -->
                    <img id="monster-snapshot-body-silhouette" src="https://github.com/msw2004727/MD/blob/main/images/mb01.png?raw=true" alt="æ€ªç¸å…¨èº«è¼ªå»“">

                    <!-- åœ–å±¤3: éƒ¨ä½åœ– -->
                    <div id="monster-parts-container">
                        <div id="monster-part-head" class="monster-part"></div>
                        <div id="monster-part-left-arm" class="monster-part"></div>
                        <div id="monster-part-right-arm" class="monster-part"></div>
                        <div id="monster-part-left-leg" class="monster-part"></div>
                        <div id="monster-part-right-leg" class="monster-part"></div>
                    </div>

                    <!-- æ–‡å­—è³‡è¨Šç–ŠåŠ å±¤ -->
                    <div id="snapshot-main-content" class="snapshot-main-content">
                        <!-- å±¬æ€§åœ–æ¨™ç­‰ -->
                    </div>
                    <div id="snapshot-win-loss" class="snapshot-win-loss">
                        <span>å‹: 0</span>
                        <span>æ•—: 0</span>
                    </div>
                    <div class="snapshot-info-overlay">
                        <div class="snapshot-info-left">
                            <span id="snapshot-achievement-title">åˆå‡ºèŒ…å»¬</span>
                            <span id="snapshot-nickname">-</span>
                        </div>
                        <div class="snapshot-info-right">
                            <span id="snapshot-evaluation">ç¸½è©•åƒ¹: 0</span>
                        </div>
                    </div>
                </div>
                <div class="top-buttons-container">
                    <button id="monster-info-button" class="top-nav-button button" disabled>ç•¶å‰æ€ªç¸</button> 
                    <button id="player-info-button" class="top-nav-button button">ç©å®¶è³‡è¨Š</button>
                    <button id="show-monster-leaderboard-btn" class="top-nav-button button">æ€ªç¸æ’è¡Œ</button>
                    <button id="show-player-leaderboard-btn" class="top-nav-button button">ç©å®¶æ’è¡Œ</button>
                    <button id="friends-list-btn" class="top-nav-button button">å¥½å‹åå–®</button>
                    <button id="newbie-guide-btn" class="top-nav-button button">æ–°æ‰‹ä¸Šè·¯</button>
                </div>
            </div>

            <!-- ä¸»è¦åŠŸèƒ½é¢æ¿ -->
            <div class="panel">
                <div class="tab-buttons" id="dna-farm-tabs">
                    <button class="tab-button active" data-tab-target="dna-inventory-content">ğŸ§¬ DNAç®¡ç†</button>
                    <button class="tab-button" data-tab-target="monster-farm-content">ğŸ¡ æ€ªç‰©è¾²å ´</button>
                    <button class="tab-button" data-tab-target="training-ground-content">ğŸ‹ï¸ è¨“ç·´å ´</button> 
                    <button class="tab-button" data-tab-target="exchange-content">âš–ï¸ äº¤æ˜“æ‰€</button>
                    <button class="tab-button" data-tab-target="homestead-content">ğŸ› ï¸ å®¶åœ’å»ºè¨­</button>
                    <button class="tab-button" data-tab-target="guild-content">ğŸ›¡ï¸ å·¥æœƒç³»çµ±</button>
                </div>

                <div id="dna-inventory-content" class="tab-content active">
                    <div id="dna-combination-panel-wrapper" class="panel mb-4">
                        <h2 class="panel-title dna-panel-title">ğŸ§¬ DNAçµ„åˆ</h2>
                        <div id="dna-combination-slots" class="dna-combination-grid mt-2"></div>
                        <div class="action-buttons-grid dual-buttons mt-3">
                            <button id="combine-button" class="success action-button-main button" disabled>æ€ªç‰©åˆæˆ</button>
                            <button id="dna-draw-button" class="primary action-button-main button">æŠ½å–DNA (1æ¬¡)</button>
                        </div>
                    </div>
                    <div class="panel-title-container" style="border-bottom: none; margin-bottom: 5px;">
                         <h2 class="panel-title dna-panel-title">ğŸ”¬ DNAç¢ç‰‡</h2>
                         <span class="panel-title-hint dna-panel-hint">â€»DNAç¢ç‰‡å¯è‡ªç”±æ‹–æ›³ï¼Œæ‹–æ›³è‡³åˆªé™¤å€å¯åˆªé™¤</span>
                    </div>
                    <div id="inventory-items" class="inventory-grid mt-2"></div>
                    <div class="mt-4">
                        <h3 class="panel-title dna-panel-title text-sm mb-2">ğŸ’ è‡¨æ™‚èƒŒåŒ… (æ‹¾å–ç‰©)</h3>
                        <div id="temporary-backpack-items" class="temp-backpack-grid"></div>
                    </div>
                </div>

                <div id="monster-farm-content" class="tab-content">
                    <div class="panel-title-container" style="border-bottom: none; margin-bottom: 5px;">
                         <h2 class="panel-title dna-panel-title">ğŸ¡ æ€ªç‰©è¾²å ´</h2>
                         <span class="panel-title-hint dna-panel-hint">â€»æœ€å¤šæ”¶ç´10éš»æ€ªç¸</span>
                    </div>
                    <div id="farm-headers" class="farm-header-grid mt-2">
                        <div>å‡ºæˆ°</div>
                        <div>æ€ªç‰©</div>
                        <div>ç‹€æ…‹</div>
                        <div class="hidden sm:block hidden-on-mobile">ç¸½è©•åƒ¹</div> 
                        <div>é¤Šæˆ</div>
                    </div>
                    <div id="farmed-monsters-list">
                        <p class="text-center text-sm text-[var(--text-secondary)] py-4 col-span-full">è¾²å ´ç©ºç©ºå¦‚ä¹Ÿï¼Œå¿«å»çµ„åˆæ€ªç¸å§ï¼</p>
                    </div>
                </div>
                
                <div id="training-ground-content" class="tab-content">
                    <p class="text-center text-lg text-[var(--text-secondary)] py-10">ğŸ‹ï¸ è¨“ç·´å ´åŠŸèƒ½éŠ³æ„é–‹ç™¼ä¸­ï¼Œæ•¬è«‹æœŸå¾…ï¼</p>
                </div>

                <div id="exchange-content" class="tab-content">
                    <p class="text-center text-lg text-[var(--text-secondary)] py-10">âš–ï¸ äº¤æ˜“æ‰€åŠŸèƒ½å°šæœªé–‹æ”¾ï¼Œæ•¬è«‹æœŸå¾…ï¼</p>
                </div>
                <div id="homestead-content" class="tab-content">
                    <p class="text-center text-lg text-[var(--text-secondary)] py-10">ğŸ› ï¸ å®¶åœ’å»ºè¨­åŠŸèƒ½å°šæœªé–‹æ”¾ï¼Œæ•¬è«‹æœŸå¾…ï¼</p>
                </div>
                <div id="guild-content" class="tab-content">
                    <p class="text-center text-lg text-[var(--text-secondary)] py-10">ğŸ›¡ï¸ å·¥æœƒç³»çµ±åŠŸèƒ½å°šæœªé–‹æ”¾ï¼Œæ•¬è«‹æœŸå¾…ï¼</p>
                </div>

                <div class="scrolling-hints-container">
                    <div class="scrolling-hint-text">ğŸ’¡ é‡‘æœ¨æ°´ç«åœŸå±¬æ€§ç›¸ç”Ÿç›¸å‰‹ï¼</div>
                    <div class="scrolling-hint-text">ğŸ’¡ ç›¸åŒDNAçµ„åˆç”¢ç”Ÿçš„æ€ªç‰©æ˜¯ç›¸åŒçš„ï¼</div>
                    <div class="scrolling-hint-text">ğŸ’¡ æ‹›å¼æ˜¯æ€ªç‰©ä¾æ“šç‰¹æ€§éš¨æ©Ÿé…ç½®ï¼</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç¢ºèªå‹•ä½œå½ˆçª— -->
    <div id="confirmation-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" id="confirmation-modal-close-x" data-modal-id="confirmation-modal">&times;</span>
            <h3 id="confirmation-modal-title" class="modal-header text-center">âš ï¸ æç¤º</h3> 
            <div id="confirmation-modal-body" class="modal-body">
                <div id="release-monster-image-placeholder" style="display:none; width:120px; height:90px; margin:10px auto;">
                    <img id="release-monster-img-preview" src="https://placehold.co/120x90/4a5568/a0aec0?text=é è¦½&font=noto-sans-tc" alt="é è¦½">
                </div>
            </div>
            <div class="modal-footer" style="justify-content: center;"> 
                <button id="confirm-action-btn" class="button danger">âœ”ï¸ ç¢ºå®š</button>
            </div>
        </div>
    </div>

    <!-- æ€ªç¸æ’è¡Œæ¦œå½ˆçª— -->
    <div id="monster-leaderboard-modal" class="modal">
        <div class="modal-content large">
            <span class="modal-close" data-modal-id="monster-leaderboard-modal">&times;</span>
            <h3 class="modal-header">æ€ªç¸æ’è¡Œæ¦œ</h3>
            <div id="monster-leaderboard-tabs-container"> 
                <div id="monster-leaderboard-element-tabs" class="tab-buttons"></div>
            </div>
            <div id="monster-leaderboard-table-container" class="modal-body">
                <table id="monster-leaderboard-table" class="leaderboard-table"></table>
            </div>
        </div>
    </div>

    <!-- ç©å®¶æ’è¡Œæ¦œå½ˆçª— -->
    <div id="player-leaderboard-modal" class="modal">
        <div class="modal-content large">
            <span class="modal-close" data-modal-id="player-leaderboard-modal">&times;</span>
            <h3 class="modal-header">ç©å®¶è‹±é›„æ¦œ</h3>
            <div id="player-leaderboard-table-container" class="modal-body">
                <table id="player-leaderboard-table" class="leaderboard-table"></table>
            </div>
        </div>
    </div>

    <!-- æ€ªç¸è³‡è¨Šå½ˆçª— -->
    <div id="monster-info-modal" class="modal">
        <div class="modal-content large">
            <span class="modal-close" data-modal-id="monster-info-modal">&times;</span>
            <div id="monster-info-modal-header-content" class="monster-info-header"></div>
            <div class="tab-buttons" id="monster-info-tabs">
                <button class="tab-button active" data-tab-target="monster-details-tab" data-parent-modal="monster-info-modal">ğŸ“œ è©³ç´°è³‡è¨Š</button>
                <button class="tab-button" data-tab-target="monster-logs-tab" data-parent-modal="monster-info-modal">ğŸ¾ æ´»å‹•ç´€éŒ„</button>
            </div>
            <div id="monster-details-tab" class="tab-content active modal-body"></div>
            <div id="monster-logs-tab" class="tab-content modal-body">
                <div id="monster-activity-logs" class="max-h-[300px] overflow-y-auto">
                    <p class="text-center text-sm text-[var(--text-secondary)] py-4">å°šç„¡æ´»å‹•ç´€éŒ„ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ç©å®¶è³‡è¨Šå½ˆçª— -->
    <div id="player-info-modal" class="modal">
        <div class="modal-content large"> 
            <span class="modal-close" data-modal-id="player-info-modal">&times;</span>
            <h3 class="modal-header">ğŸ‘¤ ç©å®¶è³‡è¨Š</h3>
            <div id="player-info-modal-body" class="modal-body"></div>
        </div>
    </div>

    <!-- å›é¥‹/æç¤ºå½ˆçª— -->
    <div id="feedback-modal" class="modal">
        <div class="modal-content feedback-wide"> 
            <span id="feedback-modal-close-x" class="modal-close" data-modal-id="feedback-modal">&times;</span>
            <h3 id="feedback-modal-title" class="modal-header text-center">è™•ç†ä¸­...</h3>
            <div id="feedback-modal-body-content" class="modal-body text-left">
                 <div id="feedback-modal-spinner" class="loading-spinner" style="display: none;"></div>
                 <div id="feedback-modal-message"></div>
                 <div id="feedback-monster-details" style="display:none;" class="mt-3"></div>
            </div>
        </div>
    </div>

    <!-- é¤Šæˆè¨­å®šå½ˆçª— -->
    <div id="cultivation-setup-modal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <span class="modal-close" data-modal-id="cultivation-setup-modal">&times;</span>
            <h3 id="cultivation-setup-modal-title" class="modal-header">ğŸŒ± æ€ªç¸é¤Šæˆ</h3>
            <div class="modal-body">
                <p class="mb-2">æ­£åœ¨ç‚º <strong id="cultivation-monster-name" class="text-[var(--accent-color)]"></strong> é€²è¡Œé¤Šæˆè¨ˆç•«ã€‚</p>
                <button id="start-cultivation-btn" class="w-full primary button">ğŸ’ª é–‹å§‹ä¿®ç…‰</button>
                <p class="cultivation-hint text-base mt-2">æç¤ºï¼šä¿®ç…‰æœŸé–“ï¼Œæ€ªç¸å°‡ç„¡æ³•æ”¾ç”Ÿæˆ–å‡ºæˆ°ã€‚</p>
                <p class="cultivation-hint text-sm mt-1">ä¿®ç…‰æ™‚é•·ä¸Šé™ç‚º <span id="max-cultivation-time">999</span> ç§’ã€‚</p>
            </div>
        </div>
    </div>

    <!-- ä¿®ç…‰æˆæœå½ˆçª— -->
    <div id="training-results-modal" class="modal">
        <div class="modal-content large">
            <span class="modal-close" id="close-training-results-btn" data-modal-id="training-results-modal">&times;</span>
            <h3 id="training-results-modal-title" class="modal-header">ğŸ‰ ä¿®ç…‰æˆæœ ğŸ‰</h3>
            <div class="modal-body">
                <div class="training-result-section">
                    <h5>ğŸ“œ å†’éšªæ•…äº‹</h5>
                    <p id="training-story-result"></p>
                </div>
                <div class="training-result-section">
                    <h5>ğŸ“ˆ æˆé•·ç´€éŒ„</h5>
                    <div id="training-growth-result"></div>
                </div>
                <div class="training-result-section">
                    <h5>ğŸ’ æ‹¾ç²ç‰©å“</h5>
                    <div id="training-items-result" class="mb-2"></div>
                    <button id="add-all-to-temp-backpack-btn" class="w-full secondary button mt-2">ä¸€éµå…¨æ•¸åŠ å…¥èƒŒåŒ…</button>
                </div>
            </div>
             <div class="modal-footer" style="justify-content: flex-end;">
                <button id="final-close-training-results-btn" class="secondary button" data-modal-id="training-results-modal">é—œé–‰</button>
            </div>
        </div>
    </div>

    <!-- æ–°æ‰‹æŒ‡å—å½ˆçª— -->
    <div id="newbie-guide-modal" class="modal">
        <div class="modal-content large">
            <span class="modal-close" data-modal-id="newbie-guide-modal">&times;</span>
            <h3 class="modal-header">ğŸ“– æ–°æ‰‹ä¸Šè·¯æŒ‡å—</h3>
            <div class="modal-body">
                <input type="text" id="newbie-guide-search-input" placeholder="æœå°‹æŒ‡å—å…§å®¹..." class="mb-4">
                <div id="newbie-guide-content-area" class="max-h-[50vh] overflow-y-auto"></div>
            </div>
        </div>
    </div>

    <!-- æé†’å½ˆçª— (é—œé–‰ä¿®ç…‰æˆæœæ™‚) -->
    <div id="reminder-modal" class="modal">
        <div class="modal-content" style="max-width: 380px;">
            <h3 id="reminder-modal-title" class="modal-header text-center">æº«é¦¨æé†’</h3>
            <div id="reminder-modal-body" class="modal-body text-center">
                <p>æ‚¨æœ‰å°šæœªåŠ å…¥èƒŒåŒ…çš„ä¿®ç…‰æ‹¾ç²ç‰©å“ï¼Œç¢ºå®šè¦é—œé–‰å—ï¼Ÿé—œé–‰å¾ŒæœªåŠ å…¥çš„ç‰©å“å°‡æœƒæ¶ˆå¤±ã€‚</p>
            </div>
            <div class="modal-footer">
                <button id="reminder-confirm-close-btn" class="danger button">ä»è¦é—œé–‰</button>
                <button id="reminder-cancel-btn" class="secondary button" data-modal-id="reminder-modal">è¿”å›æŸ¥çœ‹</button>
            </div>
        </div>
    </div>

    <!-- å¥½å‹åˆ—è¡¨/æœå°‹å½ˆçª— -->
    <div id="friends-list-modal" class="modal">
        <div class="modal-content large">
            <span class="modal-close" data-modal-id="friends-list-modal">&times;</span>
            <h3 class="modal-header">ğŸ§‘â€ğŸ¤â€ğŸ§‘ å¥½å‹åå–®</h3>
            <div class="modal-body">
                <input type="text" id="friends-list-search-input" placeholder="æœå°‹ç©å®¶æš±ç¨±..." class="mb-3">
                <div id="friends-list-container">
                    <p class="text-center text-sm text-[var(--text-secondary)]">è¼¸å…¥æš±ç¨±æœå°‹å…¶ä»–ç©å®¶ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <!-- æˆ°é¬¥è¨˜éŒ„å½ˆçª— -->
    <div id="battle-log-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" data-modal-id="battle-log-modal">&times;</span>
            <h3 class="modal-header">âš”ï¸ æˆ°é¬¥è¨˜éŒ„ âš”ï¸</h3>
            <div id="battle-log-area" class="modal-body"></div>
            <div class="modal-footer">
                <button id="close-battle-log-btn" class="secondary button" data-modal-id="battle-log-modal">é—œé–‰</button>
            </div>
        </div>
    </div>

    <!-- DNA æŠ½å–çµæœå½ˆçª— -->
    <div id="dna-draw-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" data-modal-id="dna-draw-modal">&times;</span>
            <h3 class="modal-header">ğŸ§¬ DNA æŠ½å–çµæœ</h3>
            <div class="modal-body">
                <div id="dna-draw-results-grid"></div>
                <p class="text-sm text-[var(--text-secondary)] mt-3 text-center">é»æ“Šç‰©å“å¯å°‡å…¶åŠ å…¥è‡¨æ™‚èƒŒåŒ…ã€‚</p>
            </div>
            <div class="modal-footer">
                <button id="close-dna-draw-btn" class="secondary button" data-modal-id="dna-draw-modal">é—œé–‰</button>
            </div>
        </div>
    </div>

    <!-- JavaScript æª”æ¡ˆ -->
    <script src="js/firebase-config.js" defer></script>
    <script src="js/config.js" defer></script> 
    <script src="js/game-state.js" defer></script>
    <script src="js/api-client.js" defer></script>
    <script src="js/auth.js" defer></script>
    <script src="js/game-logic.js" defer></script>
    <script src="js/ui.js" defer></script> 
    <script src="js/event-handlers.js" defer></script>
    <script src="js/main.js" defer></script>
</body>
</html>
